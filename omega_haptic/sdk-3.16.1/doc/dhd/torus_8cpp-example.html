<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Haptic SDK: torus.cpp</title>
<title>torus.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="index.html"><img alt="Logo" src="logo_color_tiny.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
  </td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief"></div>
    </td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">torus.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment"></span><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Copyright (C) 2001-2023 Force Dimension, Switzerland.</span></div>
<div class="line"><span class="comment">//  All Rights Reserved.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Force Dimension SDK 3.16.1</span></div>
<div class="line"><span class="comment">//</span><span class="comment"></span></div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment"></span><span class="comment"></span> </div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">/// This example illustrates how to compute the interaction between several</span></div>
<div class="line"><span class="comment">/// Force Dimension haptic devices and a torus that spins freely around its</span></div>
<div class="line"><span class="comment">/// center when forces are applied to it.</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">/// A single thread is used to compute the interaction force and torque on all</span></div>
<div class="line"><span class="comment">/// available haptic devices, as well as to compute the dynamics of the torus.</span></div>
<div class="line"><span class="comment">/// Holding any of the haptic devices end-effector user button stops the torus</span></div>
<div class="line"><span class="comment">/// from spinning and holds it in place.</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">// C++ library headers</span></div>
<div class="line"><span class="preprocessor">#define _USE_MATH_DEFINES</span></div>
<div class="line"><span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iomanip&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Platform specific headers</span></div>
<div class="line"><span class="preprocessor">#if defined(WIN32) || defined(WIN64)</span></div>
<div class="line"><span class="preprocessor">#define NOMINMAX</span></div>
<div class="line"><span class="preprocessor">#include &quot;windows.h&quot;</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// GLU library headers</span></div>
<div class="line"><span class="preprocessor">#ifdef MACOSX</span></div>
<div class="line"><span class="preprocessor">#include &quot;OpenGL/glu.h&quot;</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor">#include &quot;GL/glu.h&quot;</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Force Dimension SDK library header</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="dhdc_8h.html">dhdc.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// GLFW library header</span></div>
<div class="line"><span class="preprocessor">#include &lt;GLFW/glfw3.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Project headers</span></div>
<div class="line"><span class="preprocessor">#include &quot;CMatrixGL.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;FontGL.h&quot;</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">/// Haptic device data structure</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="keyword">struct </span>HapticDevice</div>
<div class="line">{<span class="comment"></span></div>
<div class="line"><span class="comment">    /// Haptic device handle</span></div>
<div class="line"><span class="comment"></span>    <span class="keywordtype">int</span> deviceId;</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /// Number of tools provided by this haptic device</span></div>
<div class="line"><span class="comment"></span>    <span class="keywordtype">int</span> numTools;</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /// Positions of the haptic device tool(s)</span></div>
<div class="line"><span class="comment"></span>    Eigen::Vector3d toolPosition[2];</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /// Haptic device rotation</span></div>
<div class="line"><span class="comment"></span>    Eigen::Matrix3d rotation;</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /// \b true if the haptic device has a wrist</span></div>
<div class="line"><span class="comment"></span>    <span class="keywordtype">bool</span> useRotation;</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /// \b true if the haptic device has a gripper</span></div>
<div class="line"><span class="comment"></span>    <span class="keywordtype">bool</span> useGripper;</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /// Constructor</span></div>
<div class="line"><span class="comment"></span>    HapticDevice()</div>
<div class="line">    : deviceId { -1 },</div>
<div class="line">      numTools {},</div>
<div class="line">      useRotation { <span class="keyword">false</span> },</div>
<div class="line">      useGripper{ <span class="keyword">false</span> }</div>
<div class="line">    {}</div>
<div class="line">};</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">/// Constants</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment"></span><span class="comment"></span> </div>
<div class="line"><span class="comment">/// Torus stiffness in [N/m]</span></div>
<div class="line"><span class="comment"></span>constexpr <span class="keywordtype">double</span> Stiffness = 1000.0;</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/// Torus apparent mass in arbitrary unit</span></div>
<div class="line"><span class="comment"></span>constexpr <span class="keywordtype">double</span> Mass = 100.0;</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/// Torus angular damping in [Nm/(rad/s)]</span></div>
<div class="line"><span class="comment"></span>constexpr <span class="keywordtype">double</span> Kv = 1.0;</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/// Torus outer radius in [m]</span></div>
<div class="line"><span class="comment"></span>constexpr <span class="keywordtype">float</span> TorusRadius0 = 0.05f;</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/// Torus inner radius in [m]</span></div>
<div class="line"><span class="comment"></span>constexpr <span class="keywordtype">float</span> TorusRadius1 = 0.027f;</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/// Haptic tool sphere radius in [m]</span></div>
<div class="line"><span class="comment"></span>constexpr <span class="keywordtype">double</span> ToolRadius = 0.005;</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/// GLFW swap interval setting</span></div>
<div class="line"><span class="comment"></span>constexpr <span class="keywordtype">int</span> SwapInterval = 1;</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">/// Global variables</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment"></span><span class="comment"></span> </div>
<div class="line"><span class="comment">/// Simulation running flag</span></div>
<div class="line"><span class="comment"></span><span class="keywordtype">bool</span> simulationRunning = <span class="keyword">true</span>;</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/// Simulation closing synchronization flag</span></div>
<div class="line"><span class="comment"></span><span class="keywordtype">bool</span> simulationFinished = <span class="keyword">false</span>;</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/// Text overlay flag</span></div>
<div class="line"><span class="comment"></span><span class="keywordtype">bool</span> showRefreshRate = <span class="keyword">true</span>;</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/// GLFW window handle</span></div>
<div class="line"><span class="comment"></span>GLFWwindow* window = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/// GLFW window width in [pixel]</span></div>
<div class="line"><span class="comment"></span><span class="keywordtype">int</span> windowWidth = 0;</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/// GLFW window height in [pixel]</span></div>
<div class="line"><span class="comment"></span><span class="keywordtype">int</span> windowHeight = 0;</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/// Vector of available haptic devices</span></div>
<div class="line"><span class="comment"></span>std::vector&lt;HapticDevice&gt; devicesList;</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/// Torus position</span></div>
<div class="line"><span class="comment"></span>Eigen::Vector3d torusPosition;</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/// Torus rotation</span></div>
<div class="line"><span class="comment"></span>Eigen::Matrix3d torusRotation;</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">/// This function renders a torus using OpenGL.</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">/// \param a_majorRadius</span></div>
<div class="line"><span class="comment">/// The outer radius of the torus in [m]</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">/// \param a_minorRadius</span></div>
<div class="line"><span class="comment">/// The inner radius of the torus in [m]</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">/// \param a_majorNumSegments</span></div>
<div class="line"><span class="comment">/// The number of segments to use to generate polygons along the torus major</span></div>
<div class="line"><span class="comment">/// direction</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">/// \param a_minorNumSegments</span></div>
<div class="line"><span class="comment">/// The number of segments to use to generate polygons along the torus minor</span></div>
<div class="line"><span class="comment">/// direction</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="keywordtype">void</span> DrawTorus(<span class="keywordtype">float</span> a_outerRadius,</div>
<div class="line">               <span class="keywordtype">float</span> a_innerRadius,</div>
<div class="line">               <span class="keywordtype">int</span> a_majorNumSegments,</div>
<div class="line">               <span class="keywordtype">int</span> a_minorNumSegments)</div>
<div class="line">{</div>
<div class="line">    glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">double</span> majorStep = 2.0 * M_PI / a_majorNumSegments;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> majorIndex = 0; majorIndex &lt; a_majorNumSegments; ++majorIndex)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">double</span> a0 = majorIndex * majorStep;</div>
<div class="line">        <span class="keywordtype">double</span> a1 = a0 + majorStep;</div>
<div class="line">        GLdouble x0 = cos(a0);</div>
<div class="line">        GLdouble y0 = sin(a0);</div>
<div class="line">        GLdouble x1 = cos(a1);</div>
<div class="line">        GLdouble y1 = sin(a1);</div>
<div class="line"> </div>
<div class="line">        glBegin(GL_TRIANGLE_STRIP);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">double</span> minorStep = 2.0 * M_PI / a_minorNumSegments;</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> minorIndex = 0; minorIndex &lt;= a_minorNumSegments; ++minorIndex)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">double</span> b = minorIndex * minorStep;</div>
<div class="line">            GLdouble c = cos(b);</div>
<div class="line">            GLdouble r = a_innerRadius * c + a_outerRadius;</div>
<div class="line">            GLdouble z = a_innerRadius * sin(b);</div>
<div class="line"> </div>
<div class="line">            glNormal3d(x0 * c, y0 * c, z / a_innerRadius);</div>
<div class="line">            glTexCoord2d(majorIndex / <span class="keyword">static_cast&lt;</span>GLdouble<span class="keyword">&gt;</span>(a_majorNumSegments), minorIndex / <span class="keyword">static_cast&lt;</span>GLdouble<span class="keyword">&gt;</span>(a_minorNumSegments));</div>
<div class="line">            glVertex3d(x0 * r, y0 * r, z);</div>
<div class="line"> </div>
<div class="line">            glNormal3d(x1 * c, y1 * c, z / a_innerRadius);</div>
<div class="line">            glTexCoord2d((majorIndex + 1) / <span class="keyword">static_cast&lt;</span>GLdouble<span class="keyword">&gt;</span>(a_majorNumSegments), minorIndex / <span class="keyword">static_cast&lt;</span>GLdouble<span class="keyword">&gt;</span>(a_minorNumSegments));</div>
<div class="line">            glVertex3d(x1 * r, y1 * r, z);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        glEnd();</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">/// This function renders the scene using OpenGL.</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="keywordtype">int</span> updateGraphics()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Clean up.</span></div>
<div class="line">    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Render the torus.</span></div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> GLfloat mat_ambient0[] = { 0.1f, 0.1f, 0.3f };</div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> GLfloat mat_diffuse0[] = { 0.1f, 0.3f, 0.5f };</div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> GLfloat mat_specular0[] = { 0.5f, 0.5f, 0.5f };</div>
<div class="line">    glMaterialfv(GL_FRONT_AND_BACK, GL_AMBIENT, mat_ambient0);</div>
<div class="line">    glMaterialfv(GL_FRONT_AND_BACK, GL_DIFFUSE, mat_diffuse0);</div>
<div class="line">    glMaterialfv(GL_FRONT_AND_BACK, GL_SPECULAR, mat_specular0);</div>
<div class="line">    glMaterialf(GL_FRONT_AND_BACK, GL_SHININESS, 1.0);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Render the torus at its current position and rotation.</span></div>
<div class="line">    cMatrixGL matrix;</div>
<div class="line">    matrix.set(torusPosition, torusRotation);</div>
<div class="line">    matrix.glMatrixPushMultiply();</div>
<div class="line">    DrawTorus(TorusRadius0, TorusRadius1, 64, 64);</div>
<div class="line">    matrix.glMatrixPop();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Configure OpenGL for tool rendering.</span></div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> GLfloat mat_ambient1[] = { 0.4f, 0.4f, 0.4f };</div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> GLfloat mat_diffuse1[] = { 0.8f, 0.8f, 0.8f };</div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> GLfloat mat_specular1[] = { 0.5f, 0.5f, 0.5f };</div>
<div class="line">    glMaterialfv(GL_FRONT_AND_BACK, GL_AMBIENT, mat_ambient1);</div>
<div class="line">    glMaterialfv(GL_FRONT_AND_BACK, GL_DIFFUSE, mat_diffuse1);</div>
<div class="line">    glMaterialfv(GL_FRONT_AND_BACK, GL_SPECULAR, mat_specular1);</div>
<div class="line">    glMaterialf(GL_FRONT_AND_BACK, GL_SHININESS, 1.0);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Render all tools for all devices.</span></div>
<div class="line">    <span class="keywordtype">size_t</span> devicesCount = devicesList.size();</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> deviceIndex = 0; deviceIndex &lt; devicesCount; deviceIndex++)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Render all tools for the current device.</span></div>
<div class="line">        HapticDevice&amp; currentDevice = devicesList[deviceIndex];</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> toolIndex = 0; toolIndex &lt; currentDevice.numTools; toolIndex++)</div>
<div class="line">        {</div>
<div class="line">            matrix.set(currentDevice.toolPosition[toolIndex], currentDevice.rotation);</div>
<div class="line">            matrix.glMatrixPushMultiply();</div>
<div class="line">            GLUquadricObj* sphere = gluNewQuadric();</div>
<div class="line">            gluSphere(sphere, ToolRadius, 32, 32);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Render a small frame if the haptic device supports rotations.</span></div>
<div class="line">            <span class="keywordflow">if</span> (currentDevice.useRotation)</div>
<div class="line">            {</div>
<div class="line">                glDisable(GL_LIGHTING);</div>
<div class="line">                glBegin(GL_LINES);</div>
<div class="line">                glColor3f(0.45f, 0.45f, 0.45f);</div>
<div class="line">                glVertex3d(0.00,  0.000,  0.000);</div>
<div class="line">                glVertex3d(0.02,  0.000,  0.000);</div>
<div class="line">                glVertex3d(0.02, -0.004,  0.000);</div>
<div class="line">                glVertex3d(0.02,  0.004,  0.000);</div>
<div class="line">                glVertex3d(0.02,  0.000, -0.004);</div>
<div class="line">                glVertex3d(0.02,  0.000,  0.004);</div>
<div class="line">                glEnd();</div>
<div class="line">                glEnable(GL_LIGHTING);</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            matrix.glMatrixPop();</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Render text overlay.</span></div>
<div class="line">    <span class="keywordflow">if</span> (showRefreshRate)</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">static</span> <span class="keywordtype">double</span> lastFrequencyUpdateTime = <a name="a0"></a><a class="code" href="dhdc_8h.html#ad88cff8031c7975479332a9a58aca158">dhdGetTime</a>();</div>
<div class="line">        <span class="keyword">static</span> <span class="keywordtype">char</span> frequencyString[16] = <span class="stringliteral">&quot;0.000 kHz&quot;</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Periodically update the haptic refresh rate.</span></div>
<div class="line">        <span class="keywordtype">double</span> time = <a class="code" href="dhdc_8h.html#ad88cff8031c7975479332a9a58aca158">dhdGetTime</a>();</div>
<div class="line">        <span class="keywordflow">if</span> (time - lastFrequencyUpdateTime &gt; 0.1)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">double</span> frequency = <a name="a1"></a><a class="code" href="dhdc_8h.html#a076243abe321a97f4ea022b8bbcb3503">dhdGetComFreq</a>();</div>
<div class="line">            lastFrequencyUpdateTime = time;</div>
<div class="line">            snprintf(frequencyString, 10, <span class="stringliteral">&quot;%0.03f kHz&quot;</span>, frequency);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Render the string.</span></div>
<div class="line">        glDisable(GL_LIGHTING);</div>
<div class="line">        glColor3f(1.0, 1.0, 1.0);</div>
<div class="line">        glRasterPos3f(0.0f, -0.01f, -0.1f);</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">char</span>* character = frequencyString; *character != <span class="charliteral">&#39;\0&#39;</span>; character++)</div>
<div class="line">        {</div>
<div class="line">            render_character(*character, HELVETICA12);</div>
<div class="line">        }</div>
<div class="line">        glEnable(GL_LIGHTING);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Report any issue.</span></div>
<div class="line">    GLenum err = glGetError();</div>
<div class="line">    <span class="keywordflow">if</span> (err != GL_NO_ERROR)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Report success.</span></div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">/// This function implements the haptics loop.</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">/// \param a_userData</span></div>
<div class="line"><span class="comment">/// Pointer to user data passed to the haptic thread</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">/// \return</span></div>
<div class="line"><span class="comment">/// A pointer to a return data structure</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="keywordtype">void</span>* hapticsLoop(<span class="keywordtype">void</span>* a_userData)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Allocate and initialize haptic loop variables.</span></div>
<div class="line">    <span class="keywordtype">double</span> timePrevious = <a class="code" href="dhdc_8h.html#ad88cff8031c7975479332a9a58aca158">dhdGetTime</a>();</div>
<div class="line">    <span class="keywordtype">double</span> px = 0.0;</div>
<div class="line">    <span class="keywordtype">double</span> py = 0.0;</div>
<div class="line">    <span class="keywordtype">double</span> pz = 0.0;</div>
<div class="line">    <span class="keywordtype">double</span> rot[3][3] = {};</div>
<div class="line">    Eigen::Vector3d toolPosition[2];</div>
<div class="line">    Eigen::Vector3d toolLocalPosition;</div>
<div class="line">    Eigen::Vector3d forceLocal;</div>
<div class="line">    Eigen::Vector3d force;</div>
<div class="line">    Eigen::Vector3d forceTool[2];</div>
<div class="line">    forceTool[0].setZero();</div>
<div class="line">    forceTool[1].setZero();</div>
<div class="line">    Eigen::Vector3d torusAngularVelocity;</div>
<div class="line">    torusAngularVelocity.setZero();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Enable force on all devices.</span></div>
<div class="line">    <span class="keywordtype">size_t</span> devicesCount = devicesList.size();</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> deviceIndex = 0; deviceIndex &lt; devicesCount; deviceIndex++)</div>
<div class="line">    {</div>
<div class="line">        <a name="a2"></a><a class="code" href="dhdc_8h.html#a178cf9ffa46dfe3d25dda74ecb34da31">dhdEnableForce</a>(<a name="a3"></a><a class="code" href="dhdc_8h.html#ac60746c35e60ad4c5533dec253a341f1">DHD_ON</a>, devicesList[deviceIndex].deviceId);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Run the haptic loop.</span></div>
<div class="line">    <span class="keywordflow">while</span> (simulationRunning)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Compute time step.</span></div>
<div class="line">        <span class="keywordtype">double</span> time = <a class="code" href="dhdc_8h.html#ad88cff8031c7975479332a9a58aca158">dhdGetTime</a>();</div>
<div class="line">        <span class="keywordtype">double</span> timeStep = time - timePrevious;</div>
<div class="line">        timePrevious = time;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Process each device in turn.</span></div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> deviceIndex = 0; deviceIndex &lt; devicesCount; deviceIndex++)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Shortcut to the current device.</span></div>
<div class="line">            HapticDevice&amp; currentDevice = devicesList[deviceIndex];</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Select the active device to receive all subsequent DHD commands.</span></div>
<div class="line">            <a name="a4"></a><a class="code" href="dhdc_8h.html#a12506e68b2887c85fd55fad3164d83ca">dhdSetDevice</a>(currentDevice.deviceId);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Retrieve the device orientation frame (identity for 3-dof devices).</span></div>
<div class="line">            <span class="keywordflow">if</span> (<a name="a5"></a><a class="code" href="dhdc_8h.html#af1d3c350d6bb73f3989d4c4392db2765">dhdGetOrientationFrame</a>(rot) &lt; 0)</div>
<div class="line">            {</div>
<div class="line">                std::cout &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;error: failed to read rotation (&quot;</span> &lt;&lt; <a name="a6"></a><a class="code" href="dhdc_8h.html#aa493832a39c7e31b44752bda5d601209">dhdErrorGetLastStr</a>() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">            currentDevice.rotation &lt;&lt; rot[0][0], rot[0][1], rot[0][2],</div>
<div class="line">                                      rot[1][0], rot[1][1], rot[1][2],</div>
<div class="line">                                      rot[2][0], rot[2][1], rot[2][2];</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Retrieve the position of all tools attached to devices.</span></div>
<div class="line">            <span class="comment">// Devices equipped with grippers provide 2 tools, while others only provide 1.</span></div>
<div class="line">            <span class="keywordflow">if</span> (currentDevice.useGripper)</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span> (<a name="a7"></a><a class="code" href="dhdc_8h.html#af3df18474e589b3335776f271921c0fd">dhdGetGripperThumbPos</a>(&amp;px, &amp;py, &amp;pz) &lt; 0)</div>
<div class="line">                {</div>
<div class="line">                    std::cout &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;error: failed to read rotation (&quot;</span> &lt;&lt; <a class="code" href="dhdc_8h.html#aa493832a39c7e31b44752bda5d601209">dhdErrorGetLastStr</a>() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">                toolPosition[0] &lt;&lt; px, py, pz;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (<a name="a8"></a><a class="code" href="dhdc_8h.html#a46954d4c7743f356d2ae2327d0c22f2e">dhdGetGripperFingerPos</a>(&amp;px, &amp;py, &amp;pz) &lt; 0)</div>
<div class="line">                {</div>
<div class="line">                    std::cout &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;error: failed to read rotation (&quot;</span> &lt;&lt; <a class="code" href="dhdc_8h.html#aa493832a39c7e31b44752bda5d601209">dhdErrorGetLastStr</a>() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">                toolPosition[1] &lt;&lt; px, py, pz;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span> (<a name="a9"></a><a class="code" href="dhdc_8h.html#ac6910076186b2709dec3c2bfa38628c2">dhdGetPosition</a>(&amp;px, &amp;py, &amp;pz) &lt; 0)</div>
<div class="line">                {</div>
<div class="line">                    std::cout &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;error: failed to read rotation (&quot;</span> &lt;&lt; <a class="code" href="dhdc_8h.html#aa493832a39c7e31b44752bda5d601209">dhdErrorGetLastStr</a>() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">                toolPosition[0] &lt;&lt; px, py, pz;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Compute the interaction between the torus and each tool.</span></div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> toolIndex = 0; toolIndex &lt; currentDevice.numTools; toolIndex++)</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Compute the position of the tool in the local coordinates of the torus.</span></div>
<div class="line">                toolLocalPosition = torusRotation.transpose() * (toolPosition[toolIndex] - torusPosition);</div>
<div class="line"> </div>
<div class="line">                <span class="comment">// Project the tool position onto the torus plane (z = 0).</span></div>
<div class="line">                Eigen::Vector3d toolProjection = toolLocalPosition;</div>
<div class="line">                toolProjection(2) = 0.0;</div>
<div class="line"> </div>
<div class="line">                <span class="comment">// Search for the nearest point on the torus medial axis.</span></div>
<div class="line">                forceLocal.setZero();</div>
<div class="line">                <span class="keywordflow">if</span> (toolLocalPosition.squaredNorm() &gt; 1e-10)</div>
<div class="line">                {</div>
<div class="line">                    Eigen::Vector3d pointAxisTorus = TorusRadius0 * toolProjection.normalized();</div>
<div class="line"> </div>
<div class="line">                    <span class="comment">// Compute eventual penetration of the tool inside the torus.</span></div>
<div class="line">                    Eigen::Vector3d torusToolDirection = toolLocalPosition - pointAxisTorus;</div>
<div class="line"> </div>
<div class="line">                    <span class="comment">// If the tool is inside the torus, compute the force which is proportional to the tool penetration.</span></div>
<div class="line">                    <span class="keywordtype">double</span> distance = torusToolDirection.norm();</div>
<div class="line">                    <span class="keywordflow">if</span> ((distance &lt; (TorusRadius1 + ToolRadius)) &amp;&amp; (distance &gt; 0.001))</div>
<div class="line">                    {</div>
<div class="line">                        forceLocal = ((TorusRadius1 + ToolRadius) - distance) * Stiffness * torusToolDirection.normalized();</div>
<div class="line">                        toolLocalPosition = pointAxisTorus + (TorusRadius1 + ToolRadius) * torusToolDirection.normalized();</div>
<div class="line">                    }</div>
<div class="line"> </div>
<div class="line">                    <span class="comment">// Otherwise, the tool is outside the torus and we have a null force.</span></div>
<div class="line">                    <span class="keywordflow">else</span></div>
<div class="line">                    {</div>
<div class="line">                        forceLocal.setZero();</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line"> </div>
<div class="line">                <span class="comment">// Convert the tool reaction force and position to world coordinates.</span></div>
<div class="line">                forceTool[toolIndex] = torusRotation * forceLocal;</div>
<div class="line">                currentDevice.toolPosition[toolIndex] = torusRotation * toolLocalPosition;</div>
<div class="line"> </div>
<div class="line">                <span class="comment">// Update the torus angular velocity.</span></div>
<div class="line">                torusAngularVelocity += -1.0 / Mass * timeStep * (currentDevice.toolPosition[toolIndex] - torusPosition).cross(forceTool[toolIndex]);</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Compute the force to render on the haptic device.</span></div>
<div class="line">            Eigen::Vector3d force;</div>
<div class="line">            <span class="keywordtype">double</span> gripperForceMagnitude = 0.0;</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// If the haptic device does not have a gripper, use the current tool force.</span></div>
<div class="line">            <span class="keywordflow">if</span> (!currentDevice.useGripper)</div>
<div class="line">            {</div>
<div class="line">                force = forceTool[0];</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// If the haptic device has a gripper, compute the projected force on each gripper tool.</span></div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Compute the total force.</span></div>
<div class="line">                force = forceTool[0] + forceTool[1];</div>
<div class="line">                Eigen::Vector3d gripperDirection = toolPosition[1] - toolPosition[0];</div>
<div class="line"> </div>
<div class="line">                <span class="comment">// If the total force is not null, project it on both gripper tools.</span></div>
<div class="line">                <span class="keywordflow">if</span> (gripperDirection.norm() &gt; 0.00001)</div>
<div class="line">                {</div>
<div class="line">                    <span class="comment">// Project the mobile gripper tool force (forceTool[1]) onto the gripper opening vector (gripperDirection).</span></div>
<div class="line">                    gripperDirection.normalize ();</div>
<div class="line">                    Eigen::Vector3d gripperForce = (forceTool[1].dot(gripperDirection) / (gripperDirection.squaredNorm())) * gripperDirection;</div>
<div class="line">                    gripperForceMagnitude = gripperForce.norm();</div>
<div class="line"> </div>
<div class="line">                    <span class="comment">// Compute the direction of the force based on the angle between the gripper</span></div>
<div class="line">                    <span class="comment">// force vector (gripperForce) and the gripper opening vector (gripperDirection)</span></div>
<div class="line">                    <span class="keywordflow">if</span> (force.norm() &gt; 0.001)</div>
<div class="line">                    {</div>
<div class="line">                        <span class="keywordtype">double</span> cosAngle = gripperDirection.dot(gripperForce) / (gripperDirection.norm() * gripperForce.norm());</div>
<div class="line">                        cosAngle = std::min(1.0, cosAngle);</div>
<div class="line">                        cosAngle = std::max(-1.0, cosAngle);</div>
<div class="line">                        <span class="keywordtype">double</span> angle = acos(cosAngle);</div>
<div class="line">                        <span class="keywordflow">if</span> ((angle &gt; M_PI / 2.0) || (angle &lt; -M_PI / 2.0))</div>
<div class="line">                        {</div>
<div class="line">                            gripperForceMagnitude = -gripperForceMagnitude;</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line"> </div>
<div class="line">                <span class="comment">// Invert the gripper force direction for left-handed devices.</span></div>
<div class="line">                <span class="keywordflow">if</span> (<a name="a10"></a><a class="code" href="dhdc_8h.html#ac34fa37c8a4c813adf10c11ca941dcbe">dhdIsLeftHanded</a>())</div>
<div class="line">                {</div>
<div class="line">                    gripperForceMagnitude = -gripperForceMagnitude;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Only enable haptic rendering once the device is in free space.</span></div>
<div class="line">            <span class="keyword">static</span> <span class="keywordtype">bool</span> safeToRenderHaptics = <span class="keyword">false</span>;</div>
<div class="line">            <span class="keywordflow">if</span> (!safeToRenderHaptics)</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span> (force.norm() == 0.0 &amp;&amp; gripperForceMagnitude == 0.0)</div>
<div class="line">                {</div>
<div class="line">                    safeToRenderHaptics = <span class="keyword">true</span>;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    force.setZero();</div>
<div class="line">                    gripperForceMagnitude = 0.0;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Apply all forces at once.</span></div>
<div class="line">            <a name="a11"></a><a class="code" href="dhdc_8h.html#aa2beb27a94c693149603619d44fc2725">dhdSetForceAndGripperForce</a>(force(0), force(1), force(2), gripperForceMagnitude);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Stop the torus rotation if any of the devices button is pressed.</span></div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> deviceIndex = 0; deviceIndex &lt; devicesCount; deviceIndex++)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (<a name="a12"></a><a class="code" href="dhdc_8h.html#a954c547357c73924b75bdf576f2abe12">dhdGetButton</a>(0, devicesList[deviceIndex].deviceId) != <a name="a13"></a><a class="code" href="dhdc_8h.html#aafe2b84f08a09e2acceb53b5ac6fd5f1">DHD_OFF</a>)</div>
<div class="line">            {</div>
<div class="line">                torusAngularVelocity.setZero();</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Add damping to slow down the torus rotation over time.</span></div>
<div class="line">        torusAngularVelocity *= (1.0 - Kv * timeStep);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Compute the next pose of the torus.</span></div>
<div class="line">        <span class="keywordflow">if</span> (torusAngularVelocity.norm() &gt; 1e-10)</div>
<div class="line">        {</div>
<div class="line">            Eigen::Matrix3d torusRotationIncrement;</div>
<div class="line">            torusRotationIncrement = Eigen::AngleAxisd(torusAngularVelocity.norm(), torusAngularVelocity.normalized());</div>
<div class="line">            torusRotation = torusRotationIncrement * torusRotation;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Flag the simulation as having finished.</span></div>
<div class="line">    simulationRunning = <span class="keyword">false</span>;</div>
<div class="line">    simulationFinished = <span class="keyword">true</span>;</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line">}</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">/// This function is called when the application exits.</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="keywordtype">void</span> onExit()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Wait for the haptic loop to finish.</span></div>
<div class="line">    simulationRunning = <span class="keyword">false</span>;</div>
<div class="line">    <span class="keywordflow">while</span> (!simulationFinished)</div>
<div class="line">    {</div>
<div class="line">        <a name="a14"></a><a class="code" href="dhdc_8h.html#a6bf00afebdd74ec809698a0ee94d3a3b">dhdSleep</a>(0.1);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Close the connection to all the haptic devices.</span></div>
<div class="line">    <span class="keywordtype">size_t</span> devicesCount = devicesList.size();</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> deviceIndex = 0; deviceIndex &lt; devicesCount; deviceIndex++)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a15"></a><a class="code" href="dhdc_8h.html#a42388a26aa14cb291eedcebb7029d688">dhdClose</a>() &lt; 0)</div>
<div class="line">        {</div>
<div class="line">            std::cout &lt;&lt; <span class="stringliteral">&quot;error: failed to close the connection to device ID &quot;</span> &lt;&lt; devicesList[deviceIndex].deviceId &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="dhdc_8h.html#aa493832a39c7e31b44752bda5d601209">dhdErrorGetLastStr</a>() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Report success.</span></div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;connection closed&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">/// This function is called when the GLFW window is resized.</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">/// \note See GLFW documentation for a description of the parameters.</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="keywordtype">void</span> onWindowResized(GLFWwindow* a_window,</div>
<div class="line">                     <span class="keywordtype">int</span> a_width,</div>
<div class="line">                     <span class="keywordtype">int</span> a_height)</div>
<div class="line">{</div>
<div class="line">    windowWidth = a_width;</div>
<div class="line">    windowHeight = a_height;</div>
<div class="line">    <span class="keywordtype">double</span> glAspect = (<span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(a_width) / <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(a_height));</div>
<div class="line"> </div>
<div class="line">    glViewport(0, 0, a_width, a_height);</div>
<div class="line">    glMatrixMode(GL_PROJECTION);</div>
<div class="line">    glLoadIdentity();</div>
<div class="line">    gluPerspective(60, glAspect, 0.01, 10);</div>
<div class="line">    gluLookAt(0.2, 0.0, 0.0,</div>
<div class="line">              0.0, 0.0, 0.0,</div>
<div class="line">              0.0, 0.0, 1.0);</div>
<div class="line">    glMatrixMode(GL_MODELVIEW);</div>
<div class="line">    glLoadIdentity();</div>
<div class="line">}</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">/// This function is called when a key is pressed in the GLFW window.</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">/// \note See GLFW documentation for a description of the parameters.</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="keywordtype">void</span> onKeyPressed(GLFWwindow* a_window,</div>
<div class="line">                  <span class="keywordtype">int</span> a_key,</div>
<div class="line">                  <span class="keywordtype">int</span> a_scanCode,</div>
<div class="line">                  <span class="keywordtype">int</span> a_action,</div>
<div class="line">                  <span class="keywordtype">int</span> a_modifiers)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Ignore all keyboard events that are not key presses.</span></div>
<div class="line">    <span class="keywordflow">if</span> (a_action != GLFW_PRESS)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Detect exit requests.</span></div>
<div class="line">    <span class="keywordflow">if</span> ((a_key == GLFW_KEY_ESCAPE) || (a_key == GLFW_KEY_Q))</div>
<div class="line">    {</div>
<div class="line">        exit(0);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Toggle the display of the refresh rate.</span></div>
<div class="line">    <span class="keywordflow">if</span> (a_key == GLFW_KEY_R)</div>
<div class="line">    {</div>
<div class="line">        showRefreshRate = !showRefreshRate;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">/// This function is called when the GLFW library reports an error.</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">/// \note See GLFW documentation for a description of the parameters.</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="keywordtype">void</span> onError(<span class="keywordtype">int</span> a_error,</div>
<div class="line">             <span class="keyword">const</span> <span class="keywordtype">char</span>* a_description)</div>
<div class="line">{</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;error: &quot;</span> &lt;&lt; a_description &lt;&lt; std::endl;</div>
<div class="line">}</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">/// This function initializes the GLFW window.</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">/// \return</span></div>
<div class="line"><span class="comment">/// 0 on success, -1 on failure.</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="keywordtype">int</span> initializeGLFW()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Initialize the GLFW library.</span></div>
<div class="line">    <span class="keywordflow">if</span> (!glfwInit())</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Set the error callback.</span></div>
<div class="line">    glfwSetErrorCallback(onError);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Compute the desired window size.</span></div>
<div class="line">    <span class="keyword">const</span> GLFWvidmode* mode = glfwGetVideoMode(glfwGetPrimaryMonitor());</div>
<div class="line">    windowWidth = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(0.8 *  mode-&gt;height);</div>
<div class="line">    windowHeight = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(0.5 * mode-&gt;height);</div>
<div class="line">    <span class="keywordtype">int</span> x = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(0.5 * (mode-&gt;width - windowWidth));</div>
<div class="line">    <span class="keywordtype">int</span> y = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(0.5 * (mode-&gt;height - windowHeight));</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Configure OpenGL rendering.</span></div>
<div class="line">    glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 2);</div>
<div class="line">    glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 1);</div>
<div class="line">    glfwWindowHint(GLFW_DOUBLEBUFFER, GLFW_TRUE);</div>
<div class="line">    glfwWindowHint(GLFW_SAMPLES, 4);</div>
<div class="line">    glfwWindowHint(GLFW_STEREO, GL_FALSE);</div>
<div class="line">    glfwWindowHint(GLFW_VISIBLE, GL_FALSE);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Apply platform-specific settings.</span></div>
<div class="line"><span class="preprocessor">#ifdef MACOSX</span></div>
<div class="line"> </div>
<div class="line">    glfwWindowHint(GLFW_COCOA_RETINA_FRAMEBUFFER, GL_FALSE);</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create the GLFW window and OpenGL display context.</span></div>
<div class="line">    window = glfwCreateWindow(windowWidth, windowHeight, <span class="stringliteral">&quot;Force Dimension - OpenGL Torus Example&quot;</span>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (!window)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">    glfwMakeContextCurrent(window);</div>
<div class="line">    glfwSetKeyCallback(window, onKeyPressed);</div>
<div class="line">    glfwSetWindowSizeCallback(window, onWindowResized);</div>
<div class="line">    glfwSetWindowPos(window, x, y);</div>
<div class="line">    glfwSwapInterval(SwapInterval);</div>
<div class="line">    glfwShowWindow(window);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Adjust initial window size</span></div>
<div class="line">    onWindowResized(window, windowWidth, windowHeight);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Define material properties.</span></div>
<div class="line">    GLfloat mat_ambient[] = { 0.5f, 0.5f, 0.5f };</div>
<div class="line">    GLfloat mat_diffuse[] = { 0.5f, 0.5f, 0.5f };</div>
<div class="line">    GLfloat mat_specular[] = { 0.5f, 0.5f, 0.5f };</div>
<div class="line">    glMaterialfv(GL_FRONT_AND_BACK, GL_AMBIENT, mat_ambient);</div>
<div class="line">    glMaterialfv(GL_FRONT_AND_BACK, GL_DIFFUSE, mat_diffuse);</div>
<div class="line">    glMaterialfv(GL_FRONT_AND_BACK, GL_SPECULAR, mat_specular);</div>
<div class="line">    glMaterialf(GL_FRONT_AND_BACK, GL_SHININESS, 1.0);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Define light sources.</span></div>
<div class="line">    GLfloat ambient[] = { 0.5f, 0.5f, 0.5f, 1.0f };</div>
<div class="line">    GLfloat diffuse[] = { 0.8f, 0.8f, 0.8f, 1.0f };</div>
<div class="line">    GLfloat specular[] = { 1.0f, 1.0f, 1.0f, 1.0f };</div>
<div class="line">    glLightfv(GL_LIGHT0, GL_AMBIENT, ambient);</div>
<div class="line">    glLightfv(GL_LIGHT0, GL_DIFFUSE, diffuse);</div>
<div class="line">    glLightfv(GL_LIGHT0, GL_SPECULAR, specular);</div>
<div class="line">    glLightf(GL_LIGHT0, GL_CONSTANT_ATTENUATION, 1.0);</div>
<div class="line">    glLightf(GL_LIGHT0, GL_LINEAR_ATTENUATION, 0.0);</div>
<div class="line">    glLightf(GL_LIGHT0, GL_QUADRATIC_ATTENUATION, 0.0);</div>
<div class="line"> </div>
<div class="line">    GLfloat lightPos[] = { 2.0, 0.0, 0.0, 1.0f };</div>
<div class="line">    GLfloat lightDir[] = { -1.0, 0.0, 0.0, 1.0f };</div>
<div class="line">    glLightfv(GL_LIGHT0, GL_POSITION, lightPos);</div>
<div class="line">    glLightfv(GL_LIGHT0, GL_SPOT_DIRECTION, lightDir);</div>
<div class="line">    glLightf(GL_LIGHT0, GL_SPOT_CUTOFF, 180);</div>
<div class="line">    glLightf(GL_LIGHT0, GL_SPOT_EXPONENT, 1.0);</div>
<div class="line">    glEnable(GL_LIGHTING);</div>
<div class="line">    glEnable(GL_LIGHT0);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Use depth buffering for hidden surface elimination.</span></div>
<div class="line">    glEnable(GL_DEPTH_TEST);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Clear the OpenGL color buffer.</span></div>
<div class="line">    glClearColor(0.0, 0.0, 0.0, 1.0);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Report success.</span></div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">/// This function initializes the haptic device.</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">/// \return</span></div>
<div class="line"><span class="comment">/// 0 on success, -1 on failure.</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="keywordtype">int</span> initializeHaptics()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> devicesCount = <a name="a16"></a><a class="code" href="dhdc_8h.html#ad1daa5610378db7078c9c104894167fd">dhdGetAvailableCount</a>();</div>
<div class="line">    <span class="keywordflow">if</span> (devicesCount &lt; 1)</div>
<div class="line">    {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;error: no device found&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Open a connection to each available haptic device and store its properties.</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> deviceIndex = 0; deviceIndex &lt; devicesCount; deviceIndex++)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">int</span> deviceId = <a name="a17"></a><a class="code" href="dhdc_8h.html#a139865cd9ee5f9bbc75380a32dc59813">dhdOpenID</a>(deviceIndex);</div>
<div class="line">        <span class="keywordflow">if</span> (deviceId &gt;= 0)</div>
<div class="line">        {</div>
<div class="line">            devicesList.push_back(HapticDevice {});</div>
<div class="line">            HapticDevice&amp; currentDevice = devicesList.back();</div>
<div class="line">            currentDevice.deviceId = deviceId;</div>
<div class="line">            currentDevice.useRotation = <a name="a18"></a><a class="code" href="dhdc_8h.html#a2ab4505d6dab45cf411e7c45560f1447">dhdHasWrist</a>(deviceId);</div>
<div class="line">            currentDevice.useGripper = <a name="a19"></a><a class="code" href="dhdc_8h.html#a15e1d081d33220cd75c6a37506e0ba79">dhdHasGripper</a>(deviceId);</div>
<div class="line">            currentDevice.numTools = (currentDevice.useGripper) ? 2 : 1;</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Enable button emulation on devices with an active gripper.</span></div>
<div class="line">            <span class="keywordflow">if</span> (<a name="a20"></a><a class="code" href="dhdc_8h.html#a89cfe26f64150f8829daa35d9a302dc8">dhdHasActiveGripper</a>() &amp;&amp; <a name="a21"></a><a class="code" href="dhdc_8h.html#aa23bc77b009e020c05ef725eb533b60c">dhdEmulateButton</a>(<a class="code" href="dhdc_8h.html#ac60746c35e60ad4c5533dec253a341f1">DHD_ON</a>) &lt; 0)</div>
<div class="line">            {</div>
<div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot;error: failed to enable button emulation (&quot;</span> &lt;&lt; <a class="code" href="dhdc_8h.html#aa493832a39c7e31b44752bda5d601209">dhdErrorGetLastStr</a>() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Display the device type.</span></div>
<div class="line">            std::cout &lt;&lt; <a name="a22"></a><a class="code" href="dhdc_8h.html#aa5ff16e7ee635f5a2ac186ead8d075c9">dhdGetSystemName</a>() &lt;&lt; <span class="stringliteral">&quot; device detected&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">/// This function initializes the simulation.</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">/// \return</span></div>
<div class="line"><span class="comment">/// 0 on success, -1 on failure.</span></div>
<div class="line"><span class="comment">///</span></div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="keywordtype">int</span> initializeSimulation()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Initialize all tool positions.</span></div>
<div class="line">    <span class="keywordtype">size_t</span> devicesCount = devicesList.size();</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> deviceIndex = 0; deviceIndex &lt; devicesCount; deviceIndex++)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> toolIndex = 0; toolIndex &lt; devicesList[deviceIndex].numTools; toolIndex++)</div>
<div class="line">        {</div>
<div class="line">            devicesList[deviceIndex].toolPosition[toolIndex].setZero();</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Initialize the torus position.</span></div>
<div class="line">    torusPosition.setZero();</div>
<div class="line">    torusRotation.Identity();</div>
<div class="line">    torusRotation = Eigen::AngleAxisd(M_PI * 45.0 / 180.0, Eigen::Vector3d(0.0, 1.0, -1.0));</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">////////////////////////////////////////////////////////////////////////////////</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc,</div>
<div class="line">         <span class="keywordtype">char</span>* argv[])</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Display version information.</span></div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;OpenGL Torus Example &quot;</span> &lt;&lt; <a name="a23"></a><a class="code" href="dhdc_8h.html#a922e46d7c95f29648069c8f47d4c4a99">dhdGetSDKVersionStr</a>() &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Copyright (C) 2001-2023 Force Dimension&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;All Rights Reserved.&quot;</span> &lt;&lt; std::endl &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Find and open a connection to a haptic device.</span></div>
<div class="line">    <span class="keywordflow">if</span> (initializeHaptics() &lt; 0)</div>
<div class="line">    {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;error: failed to initialize haptics&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Open a GLFW window to render the simulation.</span></div>
<div class="line">    <span class="keywordflow">if</span> (initializeGLFW() &lt; 0)</div>
<div class="line">    {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;error: failed to initialize GLFW&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Initialize simulation objects.</span></div>
<div class="line">    <span class="keywordflow">if</span> (initializeSimulation() &lt; 0)</div>
<div class="line">    {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;error: failed to initialize the simulation&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create a high priority haptic thread.</span></div>
<div class="line"><span class="preprocessor">#if defined(WIN32) || defined(WIN64)</span></div>
<div class="line"> </div>
<div class="line">    DWORD threadHandle;</div>
<div class="line">    CreateThread(<span class="keyword">nullptr</span>, 0, (LPTHREAD_START_ROUTINE)(hapticsLoop), <span class="keyword">nullptr</span>, 0x0000, &amp;threadHandle);</div>
<div class="line">    SetThreadPriority(&amp;threadHandle, THREAD_PRIORITY_ABOVE_NORMAL);</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"> </div>
<div class="line">    pthread_t threadHandle;</div>
<div class="line">    pthread_create(&amp;threadHandle, <span class="keyword">nullptr</span>, hapticsLoop, <span class="keyword">nullptr</span>);</div>
<div class="line">    <span class="keyword">struct </span>sched_param schedulerParameters;</div>
<div class="line">    memset(&amp;schedulerParameters, 0, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> sched_param));</div>
<div class="line">    schedulerParameters.sched_priority = 10;</div>
<div class="line">    pthread_setschedparam(threadHandle, SCHED_RR, &amp;schedulerParameters);</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Register a callback that stops the haptic thread when the application exits.</span></div>
<div class="line">    atexit(onExit);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Display user instructions.</span></div>
<div class="line">    std::cout &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;press &#39;r&#39; to toggle display of the haptic rate&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;      &#39;q&#39; to quit&quot;</span> &lt;&lt; std::endl &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Main graphic loop</span></div>
<div class="line">    <span class="keywordflow">while</span> (simulationRunning &amp;&amp; !glfwWindowShouldClose(window))</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Render graphics.</span></div>
<div class="line">        <span class="keywordflow">if</span> (updateGraphics() &lt; 0)</div>
<div class="line">        {</div>
<div class="line">            std::cout &lt;&lt; <span class="stringliteral">&quot;error: failed to update graphics&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Swap buffers.</span></div>
<div class="line">        glfwSwapBuffers(window);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Process GLFW events.</span></div>
<div class="line">        glfwPollEvents();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Close the GLFW window.</span></div>
<div class="line">    glfwDestroyWindow(window);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Close the GLFW library.</span></div>
<div class="line">    glfwTerminate();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Report success.</span></div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
<div class="ttc" id="adhdc_8h_html_ad1daa5610378db7078c9c104894167fd"><div class="ttname"><a href="dhdc_8h.html#ad1daa5610378db7078c9c104894167fd">dhdGetAvailableCount</a></div><div class="ttdeci">int __SDK dhdGetAvailableCount()</div><div class="ttdef"><b>Definition:</b> dhdc.cpp:243</div></div>
<div class="ttc" id="adhdc_8h_html_a954c547357c73924b75bdf576f2abe12"><div class="ttname"><a href="dhdc_8h.html#a954c547357c73924b75bdf576f2abe12">dhdGetButton</a></div><div class="ttdeci">int __SDK dhdGetButton(int index, char ID=-1)</div><div class="ttdef"><b>Definition:</b> dhdc.cpp:1187</div></div>
<div class="ttc" id="adhdc_8h_html_ac6910076186b2709dec3c2bfa38628c2"><div class="ttname"><a href="dhdc_8h.html#ac6910076186b2709dec3c2bfa38628c2">dhdGetPosition</a></div><div class="ttdeci">int __SDK dhdGetPosition(double *px, double *py, double *pz, char ID=-1)</div><div class="ttdef"><b>Definition:</b> dhdc.cpp:1606</div></div>
<div class="ttc" id="adhdc_8h_html_ac60746c35e60ad4c5533dec253a341f1"><div class="ttname"><a href="dhdc_8h.html#ac60746c35e60ad4c5533dec253a341f1">DHD_ON</a></div><div class="ttdeci">#define DHD_ON</div><div class="ttdef"><b>Definition:</b> dhdc.h:126</div></div>
<div class="ttc" id="adhdc_8h_html_ac34fa37c8a4c813adf10c11ca941dcbe"><div class="ttname"><a href="dhdc_8h.html#ac34fa37c8a4c813adf10c11ca941dcbe">dhdIsLeftHanded</a></div><div class="ttdeci">bool __SDK dhdIsLeftHanded(char ID=-1)</div><div class="ttdef"><b>Definition:</b> dhdc.cpp:574</div></div>
<div class="ttc" id="adhdc_8h_html_a46954d4c7743f356d2ae2327d0c22f2e"><div class="ttname"><a href="dhdc_8h.html#a46954d4c7743f356d2ae2327d0c22f2e">dhdGetGripperFingerPos</a></div><div class="ttdeci">int __SDK dhdGetGripperFingerPos(double *px, double *py, double *pz, char ID=-1)</div><div class="ttdef"><b>Definition:</b> dhdc.cpp:4603</div></div>
<div class="ttc" id="adhdc_8h_html_aa493832a39c7e31b44752bda5d601209"><div class="ttname"><a href="dhdc_8h.html#aa493832a39c7e31b44752bda5d601209">dhdErrorGetLastStr</a></div><div class="ttdeci">const char *__SDK dhdErrorGetLastStr()</div><div class="ttdef"><b>Definition:</b> dhdError.cpp:197</div></div>
<div class="ttc" id="adhdc_8h_html_a076243abe321a97f4ea022b8bbcb3503"><div class="ttname"><a href="dhdc_8h.html#a076243abe321a97f4ea022b8bbcb3503">dhdGetComFreq</a></div><div class="ttdeci">double __SDK dhdGetComFreq(char ID=-1)</div><div class="ttdef"><b>Definition:</b> dhdc.cpp:4636</div></div>
<div class="ttc" id="adhdc_8h_html"><div class="ttname"><a href="dhdc_8h.html">dhdc.h</a></div><div class="ttdoc">DHD header file.</div></div>
<div class="ttc" id="adhdc_8h_html_a15e1d081d33220cd75c6a37506e0ba79"><div class="ttname"><a href="dhdc_8h.html#a15e1d081d33220cd75c6a37506e0ba79">dhdHasGripper</a></div><div class="ttdeci">bool __SDK dhdHasGripper(char ID=-1)</div><div class="ttdef"><b>Definition:</b> dhdc.cpp:691</div></div>
<div class="ttc" id="adhdc_8h_html_a178cf9ffa46dfe3d25dda74ecb34da31"><div class="ttname"><a href="dhdc_8h.html#a178cf9ffa46dfe3d25dda74ecb34da31">dhdEnableForce</a></div><div class="ttdeci">int __SDK dhdEnableForce(uchar val, char ID=-1)</div><div class="ttdef"><b>Definition:</b> dhdc.cpp:4360</div></div>
<div class="ttc" id="adhdc_8h_html_aa5ff16e7ee635f5a2ac186ead8d075c9"><div class="ttname"><a href="dhdc_8h.html#aa5ff16e7ee635f5a2ac186ead8d075c9">dhdGetSystemName</a></div><div class="ttdeci">const char *__SDK dhdGetSystemName(char ID=-1)</div><div class="ttdef"><b>Definition:</b> dhdc.cpp:806</div></div>
<div class="ttc" id="adhdc_8h_html_af3df18474e589b3335776f271921c0fd"><div class="ttname"><a href="dhdc_8h.html#af3df18474e589b3335776f271921c0fd">dhdGetGripperThumbPos</a></div><div class="ttdeci">int __SDK dhdGetGripperThumbPos(double *px, double *py, double *pz, char ID=-1)</div><div class="ttdef"><b>Definition:</b> dhdc.cpp:4564</div></div>
<div class="ttc" id="adhdc_8h_html_a139865cd9ee5f9bbc75380a32dc59813"><div class="ttname"><a href="dhdc_8h.html#a139865cd9ee5f9bbc75380a32dc59813">dhdOpenID</a></div><div class="ttdeci">int __SDK dhdOpenID(char ID)</div><div class="ttdef"><b>Definition:</b> dhdc.cpp:411</div></div>
<div class="ttc" id="adhdc_8h_html_a42388a26aa14cb291eedcebb7029d688"><div class="ttname"><a href="dhdc_8h.html#a42388a26aa14cb291eedcebb7029d688">dhdClose</a></div><div class="ttdeci">int __SDK dhdClose(char ID=-1)</div><div class="ttdef"><b>Definition:</b> dhdc.cpp:443</div></div>
<div class="ttc" id="adhdc_8h_html_aa23bc77b009e020c05ef725eb533b60c"><div class="ttname"><a href="dhdc_8h.html#aa23bc77b009e020c05ef725eb533b60c">dhdEmulateButton</a></div><div class="ttdeci">int __SDK dhdEmulateButton(uchar val, char ID=-1)</div><div class="ttdef"><b>Definition:</b> dhdc.cpp:2929</div></div>
<div class="ttc" id="adhdc_8h_html_aafe2b84f08a09e2acceb53b5ac6fd5f1"><div class="ttname"><a href="dhdc_8h.html#aafe2b84f08a09e2acceb53b5ac6fd5f1">DHD_OFF</a></div><div class="ttdeci">#define DHD_OFF</div><div class="ttdef"><b>Definition:</b> dhdc.h:127</div></div>
<div class="ttc" id="adhdc_8h_html_a6bf00afebdd74ec809698a0ee94d3a3b"><div class="ttname"><a href="dhdc_8h.html#a6bf00afebdd74ec809698a0ee94d3a3b">dhdSleep</a></div><div class="ttdeci">void __SDK dhdSleep(double sec)</div><div class="ttdef"><b>Definition:</b> dhdc.cpp:4736</div></div>
<div class="ttc" id="adhdc_8h_html_a89cfe26f64150f8829daa35d9a302dc8"><div class="ttname"><a href="dhdc_8h.html#a89cfe26f64150f8829daa35d9a302dc8">dhdHasActiveGripper</a></div><div class="ttdeci">bool __SDK dhdHasActiveGripper(char ID=-1)</div><div class="ttdef"><b>Definition:</b> dhdc.cpp:718</div></div>
<div class="ttc" id="adhdc_8h_html_a2ab4505d6dab45cf411e7c45560f1447"><div class="ttname"><a href="dhdc_8h.html#a2ab4505d6dab45cf411e7c45560f1447">dhdHasWrist</a></div><div class="ttdeci">bool __SDK dhdHasWrist(char ID=-1)</div><div class="ttdef"><b>Definition:</b> dhdc.cpp:635</div></div>
<div class="ttc" id="adhdc_8h_html_a12506e68b2887c85fd55fad3164d83ca"><div class="ttname"><a href="dhdc_8h.html#a12506e68b2887c85fd55fad3164d83ca">dhdSetDevice</a></div><div class="ttdeci">int __SDK dhdSetDevice(char ID)</div><div class="ttdef"><b>Definition:</b> dhdc.cpp:504</div></div>
<div class="ttc" id="adhdc_8h_html_a922e46d7c95f29648069c8f47d4c4a99"><div class="ttname"><a href="dhdc_8h.html#a922e46d7c95f29648069c8f47d4c4a99">dhdGetSDKVersionStr</a></div><div class="ttdeci">const char *__SDK dhdGetSDKVersionStr()</div><div class="ttdef"><b>Definition:</b> dhdc.cpp:917</div></div>
<div class="ttc" id="adhdc_8h_html_aa2beb27a94c693149603619d44fc2725"><div class="ttname"><a href="dhdc_8h.html#aa2beb27a94c693149603619d44fc2725">dhdSetForceAndGripperForce</a></div><div class="ttdeci">int __SDK dhdSetForceAndGripperForce(double fx, double fy, double fz, double fg, char ID=-1)</div><div class="ttdef"><b>Definition:</b> dhdc.cpp:4660</div></div>
<div class="ttc" id="adhdc_8h_html_ad88cff8031c7975479332a9a58aca158"><div class="ttname"><a href="dhdc_8h.html#ad88cff8031c7975479332a9a58aca158">dhdGetTime</a></div><div class="ttdeci">double __SDK dhdGetTime()</div><div class="ttdef"><b>Definition:</b> dhdc.cpp:190</div></div>
<div class="ttc" id="adhdc_8h_html_af1d3c350d6bb73f3989d4c4392db2765"><div class="ttname"><a href="dhdc_8h.html#af1d3c350d6bb73f3989d4c4392db2765">dhdGetOrientationFrame</a></div><div class="ttdeci">int __SDK dhdGetOrientationFrame(double matrix[3][3], char ID=-1)</div><div class="ttdef"><b>Definition:</b> dhdc.cpp:4534</div></div>
<address class="separator"><hr>
</address>
<address class="footer">
<font size=-2>
<b>Haptic SDK 3.16.1 documentation</b><br>
Please address any questions to <a href="mailto:support@forcedimension.com">support@forcedimension.com</a><br>(C) 2001-2023 - <a href="http://www.forcedimension.com">Force Dimension</a><br>
All Rights Reserved.
</font>
</address>
</body>
</html>
